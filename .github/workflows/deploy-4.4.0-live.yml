name: Deploy 4.4.0-LIVE

on:
  push:
    paths:
      - '.github/workflows/deploy-4.4.0-live.yml'

permissions:
  contents: write

jobs:
  build-and-release:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Prepare Release Artifacts
        run: |
          mkdir release_pack
          # Copy Data (from 4.4.0/PTU as requested)
          cp -r 4.4.0/PTU/data release_pack/
          # Copy user.cfg (from 4.4.0/PTU)
          cp 4.4.0/PTU/user.cfg release_pack/
          
          # Zip it up
          cd release_pack
          zip -r ../ScCompLangPackRemix-4.4.0-LIVE.zip data user.cfg
          cd ..
          
          echo "Created zip: ScCompLangPackRemix-4.4.0-LIVE.zip"
          unzip -l ScCompLangPackRemix-4.4.0-LIVE.zip

      - name: Create Release
        uses: softprops/action-gh-release@v1
        with:
          tag_name: 4.4.0-LIVE
          name: 4.4.0-LIVE
          body: |
            # ScCompLangPackRemix 4.4.0-LIVE
            
            **Automated Release**
            
            This release contains the remixed language pack for Star Citizen 4.4.0.
            
            ## Installation
            1. Download `ScCompLangPackRemix-4.4.0-LIVE.zip`
            2. Extract to your Star Citizen LIVE folder (`C:\Program Files\Roberts Space Industries\StarCitizen\LIVE`)
            3. Ensure `data` folder and `user.cfg` are in the root of LIVE.
          files: ScCompLangPackRemix-4.4.0-LIVE.zip
          make_latest: true
          draft: false
          prerelease: false
